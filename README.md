# **Тестовое задание для стажёра Backend (осенняя волна 2025)**

# Сервис назначения ревьюеров для Pull Request’ов

Условия задачи описаны в файле [TASK.md](./TASK.md).


### Вопросы

#### Эта секция содержит вопросы, которые возникли у меня в процессе выполнения задания, а также мои ответы на них.

- **Может ли пользователь состоять в нескольких командах?**  
    Нет, пользователь может состоять только в одной команде.
    Сделано так, поскольку в реальных сценариях обычно пользователь привязан к одной команде, и это упрощает логику назначения ревьюверов.
- **Может ли команда менять своё название?**  
    Нет, команда не может менять своё название. 

    Это упрощает идентификацию команд и предотвращает возможные конфликты при переименовании.
- **Что происходит с PR, если его автора удаляют или деактивируют?**  
    PR остаётся в системе с текущим статусом и назначенными ревьюверами.
    Это позволяет сохранять историю изменений и назначений, даже если автор больше не активен.
    Поле is_active у пользователя становится false.

- **А что, если создадут команду, в которой есть пользователь, который был до этого в другой команде?**  
    Пользователь будет автоматически удалён из предыдущей команды и добавлен в новую.
    Это обеспечивает целостность данных и предотвращает дублирование пользователей в нескольких командах.

#### Плохая документация:
- **а что за 401 код в респонсе на setActive?**  
    я решил, что это ошибка в спецификации OpenAPI, т.к. не описана
    ни авторизация, ни код UNAUTHORIZED в enum кодов. поэтому 401 код просто не будет приходить. и токен приниматься тоже.
    блок securitySchemes отсутствует, код 401 невозможен, enum не содержит UNAUTHORIZED, поэтому принято решение создать без аутентификации. 
    кроме того, в остальных методах нет поля "is_admin" или подобного, которое бы указывало на наличие админских прав.
- **описание /team/add: создаёт или обновляет пользователей в команде**  
    здесь не сходится документация - "создаёт или обновляет пользователей" и "если команда с таким именем уже существует, возвращается ошибка".
    
  я решил, что, после создания команда будет иммутабельна через метод /team/add с team_name = old_name.
  для перемещения пользователя в другую команду нужно создать новую команду с новым именем, куда положим пользователя.
- **а что за AdminToken и UserToken?**  
  они не прописаны в спецификации. а в тех разделах, где они упомянуты, не описано, как их получить.
  я решил, что токены не нужны, т.к. в спецификации нет блока securitySchemes, нет поля "is_admin" или подобного, которое бы указывало на наличие админских прав.
  поэтому принято решение создать без аутентификации. (ну там выше было написано).
- **в описании /user/getReview: что, если пользователя нет?**  
    тогда логичнее всего вернуть 404. так и сделал